<tool id="adscreening" name="Autodock screening (4.2.3)" version="4.2.3">
  <description>locally developed Autodock wrapper.  Uses Autodock to screen against a library of small molecules ligands.</description>
  <parallelism method="basic"></parallelism>

  <command>
    module load galaxy-scripts;
    
    #if str($database) == "nci" :
     ## #set $totalrun = 1541
     #set $totalrun = 10
    #end if
    
    #if str($receptor_file) != "None" :
      ln -s $receptor_file $receptor_file.name; 
    #end if
    
    ADscreeningjobscript.pl $receptor_file.name $database $timerun;
    
    arrayrun 1-$totalrun worker_autodock.slurm;
  
    lpevaluatescreen.pl $database $totalrun;
    
    tar --exclude='*galaxy*' --exclude='*slurm*' --exclude='*.log' -cvf autodock_res.tar *
    
  </command>

  <requirements>
    <requirement type="binary">autodock4</requirement>
  </requirements>

  <inputs> 
    <param name="receptor_file" type="data" label="Receptor file" optional="false" format="txt" help="Receptor molecule in PDBQT."/>
    <param name="database" type="select" label="Database of small molecule ligands">
        <option value="nci" select="true">NCI Diversity Set II</option> 
    </param> 
    <param name="timerun" type="integer" value="1" size="8" label="time for individual autodock runs IN HOURS" optional="false" help="Approximate time to complete one docking experiment. If unsure, use the same time as in the job parameters below." />
  </inputs>

  <outputs>
    <data format="tar" name="res" label="Autodock on ${receptor_file.name} - all results" from_work_dir="autodock_res.tar"/>
   <data format="txt" name="summary" label="Autodock on ${receptor_file.name} - screen summary" from_work_dir="screen_summary.txt"/> 
  </outputs>

  <help>
  
 **About ADscreening** 
  
Adscreening is a locally developed front end to AutoDock.  It runs Autodock against the Diversity Set molecule library from NCI (http://dtp.nci.nih.gov/docs/3d_database/Structural_information/structural_data.html).

**About Autodock**

AutoDock is a suite of automated docking tools. It is designed to predict how small molecules, such as substrates or drug candidates, bind to a receptor of known 3D structure. 

AutoDock 4 consists of two programs: autodock performs the docking of the ligand to a set of grids describing the target protein; autogrid pre-calculates these grids.
 
**Home page**: http://autodock.scripps.edu/

**Input**: Input files for ligand and receptor are in a PDBQT format. The NCI Diversity Set II of small molecules was downloaded from http://autodock.scripps.edu/resources/databases.

**Output**: ??


  </help>
</tool>
